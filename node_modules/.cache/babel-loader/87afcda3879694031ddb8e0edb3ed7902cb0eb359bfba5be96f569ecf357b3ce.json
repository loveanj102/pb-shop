{"ast":null,"code":"var _jsxFileName = \"/Users/nikki.kang/Desktop/Nikki/website/pb-shop/src/admin/Dashboard.js\",\n  _s = $RefreshSig$();\n// import { Outlet, useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useEffect, useReducer } from 'react';\n// import Message from '../../components/Message';\n// import { MessageContext, messageReducer, initState } from '../../store/MessageStore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  var _document$cookie$spli;\n  // const navigate = useNavigate();\n  // const reducer = useReducer(messageReducer, initState);\n  // const logout = () => { //路由保護，按下登出按鈕清除cookie，事件建立\n  //     document.cookie = 'shopToken=;'\n  //     navigate(`/login`) //網址轉回login page\n  // }\n\n  //取出cookie token值 , 並取得產品列表\n  const token = (_document$cookie$spli = document.cookie.split(\"; \").find(row => row.startsWith(\"shopToken=\"))) === null || _document$cookie$spli === void 0 ? void 0 : _document$cookie$spli.split(\"=\")[1];\n  console.log(token);\n  axios.defaults.headers.common['Authorization'] = token; //4.登入時將token帶入\n\n  useEffect(() => {\n    if (!token) {\n      //如果用戶沒有攜帶token將強制回到login頁面\n      navigate(`/login`);\n    }\n    (async () => {\n      //如果用戶有攜帶token就去驗證token是否正確\n      try {\n        await axios.post(`/v2/api/user/check`); //判斷用戶是否登入的方法\n      } catch (error) {\n        console.log(error);\n        if (!error.response.data.success) {\n          navigate(`/login`);\n        }\n      }\n    })();\n  }, [navigate, token]);\n  return /*#__PURE__*/_jsxDEV(MessageContext.Provider, {\n    value: reducer,\n    children: [/*#__PURE__*/_jsxDEV(Message, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"navbar navbar-expand-lg bg-dark\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white mb-0\",\n          children: \"HEX EATS \\u5F8C\\u53F0\\u7BA1\\u7406\\u7CFB\\u7D71\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"navbar-toggler\",\n          type: \"button\",\n          \"data-bs-toggle\": \"collapse\",\n          \"data-bs-target\": \"#navbarNav\",\n          \"aria-controls\": \"navbarNav\",\n          \"aria-expanded\": \"false\",\n          \"aria-label\": \"Toggle navigation\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"navbar-toggler-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"collapse navbar-collapse justify-content-end\",\n          id: \"navbarNav\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"navbar-nav\",\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-sm btn-light\",\n                onClick: logout,\n                children: \"\\u767B\\u51FA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex\",\n      style: {\n        minHeight: 'calc(100vh - 56px)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-light\",\n        style: {\n          width: '200px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group list-group-flush\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            className: \"list-group-item list-group-item-action py-3\",\n            to: \"/admin/products\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-cup-fill me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 29\n            }, this), \"\\u7522\\u54C1\\u5217\\u8868\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            className: \"list-group-item list-group-item-action py-3\",\n            to: \"/admin/coupons\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-ticket-perforated-fill me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this), \"\\u512A\\u60E0\\u5377\\u5217\\u8868\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            className: \"list-group-item list-group-item-action py-3\",\n            to: \"/admin/orders\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-receipt me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 29\n            }, this), \"\\u8A02\\u55AE\\u5217\\u8868\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-100\",\n        children: [token && /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 31\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n}\n_s(Dashboard, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["axios","useEffect","useReducer","jsxDEV","_jsxDEV","Dashboard","_s","_document$cookie$spli","token","document","cookie","split","find","row","startsWith","console","log","defaults","headers","common","navigate","post","error","response","data","success","MessageContext","Provider","value","reducer","children","Message","fileName","_jsxFileName","lineNumber","columnNumber","className","type","id","onClick","logout","style","minHeight","width","Link","to","Outlet","_c","$RefreshReg$"],"sources":["/Users/nikki.kang/Desktop/Nikki/website/pb-shop/src/admin/Dashboard.js"],"sourcesContent":["// import { Outlet, useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useEffect, useReducer } from 'react';\n// import Message from '../../components/Message';\n// import { MessageContext, messageReducer, initState } from '../../store/MessageStore';\n\n\nfunction Dashboard() {\n\n    // const navigate = useNavigate();\n    // const reducer = useReducer(messageReducer, initState);\n    // const logout = () => { //路由保護，按下登出按鈕清除cookie，事件建立\n    //     document.cookie = 'shopToken=;'\n    //     navigate(`/login`) //網址轉回login page\n    // }\n\n    //取出cookie token值 , 並取得產品列表\n    const token = document.cookie\n        .split(\"; \")\n        .find((row) => row.startsWith(\"shopToken=\"))\n        ?.split(\"=\")[1];\n    console.log(token);\n    axios.defaults.headers.common['Authorization'] = token; //4.登入時將token帶入\n\n\n    useEffect(() => {\n        if (!token) { //如果用戶沒有攜帶token將強制回到login頁面\n            navigate(`/login`);\n        }\n        (async () => { //如果用戶有攜帶token就去驗證token是否正確\n            try {\n                await axios.post(`/v2/api/user/check`); //判斷用戶是否登入的方法\n            } catch (error) {\n                console.log(error);\n                if (!error.response.data.success) {\n                    navigate(`/login`);\n                }\n            }\n        })();\n    }, [navigate, token]);\n\n\n    return (\n        <MessageContext.Provider value={reducer}>\n            <Message />\n            <nav className=\"navbar navbar-expand-lg bg-dark\">\n                <div className=\"container-fluid\">\n                    <p className=\"text-white mb-0\">\n                        HEX EATS 後台管理系統\n                    </p>\n                    <button\n                        className=\"navbar-toggler\"\n                        type=\"button\"\n                        data-bs-toggle=\"collapse\"\n                        data-bs-target=\"#navbarNav\"\n                        aria-controls=\"navbarNav\"\n                        aria-expanded=\"false\"\n                        aria-label=\"Toggle navigation\"\n                    >\n                        <span className=\"navbar-toggler-icon\" />\n                    </button>\n                    <div className=\"collapse navbar-collapse justify-content-end\" id=\"navbarNav\">\n                        <ul className=\"navbar-nav\">\n                            <li className=\"nav-item\">\n                                <button type=\"button\" className=\"btn btn-sm btn-light\" onClick={logout}>\n                                    登出\n                                </button>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </nav>\n            <div className=\"d-flex\" style={{ minHeight: 'calc(100vh - 56px)' }}>\n                <div className=\"bg-light\" style={{ width: '200px' }}>\n                    <ul className=\"list-group list-group-flush\">\n                        <Link className=\"list-group-item list-group-item-action py-3\" to=\"/admin/products\">\n                            <i className=\"bi bi-cup-fill me-2\" />\n                            產品列表\n                        </Link>\n                        <Link className=\"list-group-item list-group-item-action py-3\" to=\"/admin/coupons\">\n                            <i className=\"bi bi-ticket-perforated-fill me-2\" />\n                            優惠卷列表\n                        </Link>\n                        <Link className=\"list-group-item list-group-item-action py-3\" to=\"/admin/orders\">\n                            <i className=\"bi bi-receipt me-2\" />\n                            訂單列表\n                        </Link>\n                    </ul>\n                </div>\n                <div className=\"w-100\">\n                    {/* Products */}\n                    {token && <Outlet />} {/*token判斷是否夾帶 */}\n                    {/* Products end */}\n                </div>\n            </div>\n        </MessageContext.Provider>\n    )\n}\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}