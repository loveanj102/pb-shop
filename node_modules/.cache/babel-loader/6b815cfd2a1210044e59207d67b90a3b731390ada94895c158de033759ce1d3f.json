{"ast":null,"code":"import{Link,useOutletContext,useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import{Input}from'../../components/FormElements';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CheckOut(){var _cartData$carts;const{cartData}=useOutletContext();const{register,handleSubmit,formState:{errors}}=useForm({mode:'onTouched'});const navigate=useNavigate();const onSubmit=async data=>{const{name,email,tel,address}=data;const form={data:{user:{name,email,tel,address}}};const res=await axios.post(\"/v2/api/\".concat(process.env.REACT_APP_API_PATH,\"/order\"),form);console.log(res);navigate(\"/success/\".concat(res.data.orderId));};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-light pt-5 pb-7\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center flex-md-row flex-column-reverse\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"col-md-6\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"fw-bold\",children:\"\\u5916\\u9001\\u8CC7\\u6599\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsx(Input,{id:\"email\",labelText:\"Email\",type:\"email\",errors:errors,register:register,rules:{required:'Email 為必填',pattern:{value:/^\\S+@\\S+$/i,message:'Email 格式不正確'}}})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsx(Input,{id:\"name\",type:\"text\",errors:errors,labelText:\"\\u4F7F\\u7528\\u8005\\u540D\\u7A31\",register:register,rules:{required:'使用者名稱為必填',maxLength:{value:10,message:'使用者名稱長度不超過 10'}}})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsx(Input,{id:\"tel\",labelText:\"\\u96FB\\u8A71\",type:\"tel\",errors:errors,register:register,rules:{required:'電話為必填',minLength:{value:6,message:'電話不少於 6 碼'},maxLength:{value:12,message:'電話不超過 12 碼'}}})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsx(Input,{id:\"address\",labelText:\"\\u5730\\u5740\",type:\"address\",errors:errors,register:register,rules:{required:'地址為必填'}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100\",children:[/*#__PURE__*/_jsxs(Link,{className:\"text-dark mt-md-0 mt-3\",to:\"/cart\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-left me-2\"}),\" \\u7E7C\\u7E8C\\u9EDE\\u9910\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-dark py-3 px-7 rounded-0\",children:\"\\u9001\\u51FA\\u8868\\u55AE\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-4\",children:\"\\u9078\\u8CFC\\u9910\\u9EDE\"}),cartData===null||cartData===void 0?void 0:(_cartData$carts=cartData.carts)===null||_cartData$carts===void 0?void 0:_cartData$carts.map(item=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.product.imageUrl,alt:\"\",className:\"me-2\",style:{width:'48px',height:'48px',objectFit:'cover'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between fw-bold\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:item.product.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"x\",item.qty]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-muted mb-0\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"NT$ \",item.product.price]})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"NT$ \",item.final_total]})]})]})]},item.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mt-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 h4 fw-bold\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0 h4 fw-bold\",children:[\"NT$ \",cartData.final_total]})]})]})})]})})});}export default CheckOut;","map":{"version":3,"names":["Link","useOutletContext","useNavigate","useForm","Input","axios","jsx","_jsx","jsxs","_jsxs","CheckOut","_cartData$carts","cartData","register","handleSubmit","formState","errors","mode","navigate","onSubmit","data","name","email","tel","address","form","user","res","post","concat","process","env","REACT_APP_API_PATH","console","log","orderId","className","children","id","labelText","type","rules","required","pattern","value","message","maxLength","minLength","to","carts","map","item","src","product","imageUrl","alt","style","width","height","objectFit","title","qty","price","final_total"],"sources":["/Users/nikki.kang/Desktop/Nikki/website/pb-shop/src/pages/front/CheckOut.js"],"sourcesContent":["import { Link, useOutletContext, useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { Input } from '../../components/FormElements';\nimport axios from 'axios';\n\n\n\nfunction CheckOut() {\n    const { cartData } = useOutletContext();\n\n    const {\n        register,\n        handleSubmit,\n        formState: { errors },\n    } = useForm({\n        mode: 'onTouched',\n    });\n\n    const navigate = useNavigate();\n\n\n    const onSubmit = async (data) => {\n        const { name, email, tel, address } = data;\n        const form = {\n            data: {\n                user: {\n                    name,\n                    email,\n                    tel,\n                    address,\n                },\n            },\n        };\n        const res = await axios.post(`/v2/api/${process.env.REACT_APP_API_PATH}/order`, form);\n        console.log(res);\n        navigate(`/success/${res.data.orderId}`)\n    };\n\n\n\n    return (\n\n        <div className='bg-light pt-5 pb-7'>\n            <div className='container'>\n                <div className='row justify-content-center flex-md-row flex-column-reverse'>\n                    <form className='col-md-6' onSubmit={handleSubmit(onSubmit)}>\n                        <div className='bg-white p-4'>\n                            <h4 className='fw-bold'>外送資料</h4>\n                            <div className='mb-2'>\n                                <Input\n                                    id='email'\n                                    labelText='Email'\n                                    type='email'\n                                    errors={errors}\n                                    register={register}\n                                    rules={{\n                                        required: 'Email 為必填',\n                                        pattern: {\n                                            value: /^\\S+@\\S+$/i,\n                                            message: 'Email 格式不正確',\n                                        },\n                                    }}\n                                ></Input>\n                            </div>\n                            <div className='mb-2'>\n                                <Input\n                                    id='name'\n                                    type='text'\n                                    errors={errors}\n                                    labelText='使用者名稱'\n                                    register={register}\n                                    rules={{\n                                        required: '使用者名稱為必填',\n                                        maxLength: {\n                                            value: 10,\n                                            message: '使用者名稱長度不超過 10',\n                                        },\n                                    }}\n                                ></Input>\n                            </div>\n                            <div className='mb-2'>\n                                <Input\n                                    id='tel'\n                                    labelText='電話'\n                                    type='tel'\n                                    errors={errors}\n                                    register={register}\n                                    rules={{\n                                        required: '電話為必填',\n                                        minLength: {\n                                            value: 6,\n                                            message: '電話不少於 6 碼',\n                                        },\n                                        maxLength: {\n                                            value: 12,\n                                            message: '電話不超過 12 碼',\n                                        },\n                                    }}\n                                ></Input>\n                            </div>\n                            <div className='mb-2'>\n                                <Input\n                                    id='address'\n                                    labelText='地址'\n                                    type='address'\n                                    errors={errors}\n                                    register={register}\n                                    rules={{\n                                        required: '地址為必填',\n                                    }}\n                                ></Input>\n                            </div>\n                        </div>\n                        <div className='d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100'>\n                            <Link className='text-dark mt-md-0 mt-3' to='/cart'>\n                                <i className='bi bi-chevron-left me-2'></i> 繼續點餐\n                            </Link>\n                            <button\n                                type='submit'\n                                className='btn btn-dark py-3 px-7 rounded-0'\n                            >\n                                送出表單\n                            </button>\n                        </div>\n                    </form>\n                    <div className='col-md-4'>\n                        <div className='border p-4 mb-4'>\n                            <h4 className='mb-4'>選購餐點</h4>\n                            {cartData?.carts?.map((item) => {\n                                return (\n                                    <div className='d-flex' key={item.id}>\n                                        <img\n                                            src={item.product.imageUrl}\n                                            alt=''\n                                            className='me-2'\n                                            style={{\n                                                width: '48px',\n                                                height: '48px',\n                                                objectFit: 'cover',\n                                            }}\n                                        />\n                                        <div className='w-100'>\n                                            <div className='d-flex justify-content-between fw-bold'>\n                                                <p className='mb-0'>{item.product.title}</p>\n                                                <p className='mb-0'>x{item.qty}</p>\n                                            </div>\n                                            <div className='d-flex justify-content-between'>\n                                                <p className='text-muted mb-0'>\n                                                    <small>NT$ {item.product.price}</small>\n                                                </p>\n                                                <p className='mb-0'>NT$ {item.final_total}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                            <div className='d-flex justify-content-between mt-4'>\n                                <p className='mb-0 h4 fw-bold'>Total</p>\n                                <p className='mb-0 h4 fw-bold'>NT$ {cartData.final_total}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    );\n}\nexport default CheckOut;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}