{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const navigate=useNavigate();//預設navigate用useNavigate狀態\nconst[data,setData]=useState({//基礎狀態設定\nusername:'',// 兩者皆為空字串\npassword:''});const[loginState,setLoginState]=useState({});const handleChange=e=>{//事件綁定\nconst{name,value}=e.target;//取值，name的value值\nsetData({...data,[name]:value});//將取值寫入\n};const submit=async e=>{try{const res=await axios.post(\"/v2/admin/signin\",data);//1.先登入API\nconst{token,expired}=res.data;//2.預設取值token\ndocument.cookie=\"shopToken=\".concat(token,\"; expires=\").concat(new Date(expired),\";\");//3.儲存token\nif(res.data.success){//如果api回傳為success，那就轉址到/admin/products頁面\nnavigate(\"/admin/products\");}}catch(error){console.log(error);setLoginState(error.response.data);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container py-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u767B\\u5165\\u5E33\\u865F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger \".concat(loginState.message?'d-block':'d-none'),role:\"alert\",children:[loginState.message,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email\",className:\"form-label w-100\",children:[\"Email\",/*#__PURE__*/_jsx(\"input\",{id:\"email\",className:\"form-control\",name:\"username\",type:\"email\",placeholder:\"Email Address\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"password\",className:\"form-label w-100\",children:[\"\\u5BC6\\u78BC\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",id:\"password\",placeholder:\"name@example.com\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:submit,children:\"\\u767B\\u5165\"})]})})});}export default Login;","map":{"version":3,"names":["axios","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","navigate","data","setData","username","password","loginState","setLoginState","handleChange","e","name","value","target","submit","res","post","token","expired","document","cookie","concat","Date","success","error","console","log","response","className","children","message","role","htmlFor","id","type","placeholder","onChange","onClick"],"sources":["/Users/nikki.kang/Desktop/Nikki/website/pb-shop/src/pages/Login.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Login() {\n    const navigate = useNavigate(); //預設navigate用useNavigate狀態\n\n    const [data, setData] = useState({  //基礎狀態設定\n        username: '', // 兩者皆為空字串\n        password: '',\n    });\n\n    const [loginState, setLoginState] = useState({});\n\n    const handleChange = (e) => { //事件綁定\n        const { name, value } = e.target; //取值，name的value值\n        setData({ ...data, [name]: value }); //將取值寫入\n\n    }\n\n    const submit = async (e) => {\n        try {\n            const res = await axios.post(`/v2/admin/signin`, data); //1.先登入API\n            const { token, expired } = res.data; //2.預設取值token\n            document.cookie = `shopToken=${token}; expires=${new Date(expired)};`; //3.儲存token\n            if (res.data.success) {  //如果api回傳為success，那就轉址到/admin/products頁面\n                navigate(`/admin/products`)\n            }\n\n        } catch (error) {\n            console.log(error);\n            setLoginState(error.response.data);\n\n        }\n    }\n\n\n\n\n\n\n\n\n    return (<div className=\"container py-5\">\n        <div className=\"row justify-content-center\">\n            <div className=\"col-md-6\">\n                <h2>登入帳號</h2>\n\n                <div className={`alert alert-danger ${loginState.message ? 'd-block' : 'd-none'}`} role=\"alert\">\n                    {loginState.message} {/*直接帶入api錯誤訊息*/}\n                </div>\n                <div className=\"mb-2\">\n                    <label htmlFor=\"email\" className=\"form-label w-100\">\n                        Email\n                        <input id=\"email\" className=\"form-control\" name=\"username\" type=\"email\" placeholder=\"Email Address\" onChange={handleChange} />\n                    </label>\n                </div>\n                <div className=\"mb-2\">\n                    <label htmlFor=\"password\" className=\"form-label w-100\">\n                        密碼\n                        <input type=\"password\" className=\"form-control\" name=\"password\" id=\"password\" placeholder=\"name@example.com\" onChange={handleChange} />\n                    </label>\n                </div>\n                <button type=\"button\" className=\"btn btn-primary\" onClick={submit}>登入</button>\n            </div>\n        </div>\n    </div>)\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}